@page
@using API.Controllers;
@using APPCORE.Security;
@using APPCORE;
@using APPCORE.Services
@using CAPA_NEGOCIO.Gestion_Pagos.Model
@using CAPA_NEGOCIO.Gestion_Pagos.Model.PowerTranzTpv
@using CAPA_NEGOCIO.Gestion_Pagos.Operations
@using DataBaseModel;
@{
	string? identify = HttpContext?.Session.GetString("sessionKey");
	if (!SecurityController.HavePermission(identify, Permissions.GESTION_ESTUDIANTES_PROPIOS))
	{
		Response.Redirect("/Security/Login");
		return;
	}
	// double pagoTotal = 0;
	//PagosRequest? pagosRequest = PagosOperation.GetPagoARealizar(identify);
	PowerTranzTpvResponse? pagosResponse = SessionServices.Get<PowerTranzTpvResponse>("PAGO_PROCESO_RESPONSE", identify);
}
<div>
	@* <button onclick="printIframe()" class="btn-success">Print</button> *@
	<style>
		.page-content {
			overflow-y: scroll;
		}
	</style>
	
	<!-- Alerta importante para los padres -->	
		<div class="alert-warning">
			‚ö†Ô∏è <strong>Importante:</strong> Estimado padre/madre de familia, despu√©s de que se cargue el formulario de pago, el sistema de su banco le solicitar√° que autorice la transacci√≥n mediante un c√≥digo de verificaci√≥n.

			<br /><br />

			üëâ Este c√≥digo ser√° enviado por el medio que usted seleccione (mensaje de texto SMS o correo electr√≥nico). Por favor, espere el formulario, elija el medio de env√≠o y revise su bandeja de entrada o su tel√©fono para obtener el c√≥digo.

			<br /><br />

			üö´ Si el banco requiere este c√≥digo y usted no lo ingresa, <strong>el pago no se completar√°</strong>.

			<br /><br />

			‚úÖ En algunos casos, si su banco no requiere verificaci√≥n, el pago se completar√° autom√°ticamente y se mostrar√° directamente el comprobante.

			<br /><br />

			Gracias por su atenci√≥n y comprensi√≥n.
		</div>


	<iframe id="paymentFrame" style="width: 100%; height: 600px;"
		src="data:text/html;charset=utf-8,@pagosResponse?.RedirectData" frameborder="0"></iframe>
	<a style="float: left; margin: 10px" href="https://portal.cca.edu.ni/Gestion_Pagos/Historial_Pagos"	class="btn-success">Ver Historial</a>

	<script type="text/javascript">
		function printIframe() {
			var iframe = document.getElementById('paymentFrame');
			iframe.contentWindow.focus();
			iframe.contentWindow.print();
		}
	</script>

	@*  @Html.Raw(pagosResponse.RedirectData);*@
</div>
@* <form method="get" asp-controller="ApiPagos" asp-action="AutorizarPago">

	<div>
		<button class="btn btn-success" type="submit">Pagar</button>
	</div>
</form> *@